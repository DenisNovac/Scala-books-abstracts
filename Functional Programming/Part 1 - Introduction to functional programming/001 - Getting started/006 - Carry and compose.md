# От типов к имплементациям

Определение полиморфных функций снижает количество возможных имплементаций. Если функция определена с типом A, то единственные возможные операции для этого типа - те, что пришли в качестве аргументов. Иногда возможная имплементация всего одна.

Возьмём функцию `partial1`, которая берёт значение и функцию двух аргументов и возвращает функцию одного элемента в качестве результата (*частичное применение*/*partial application*).

> Частичное применение — возможность в ряде языков программирования зафиксировать часть аргументов многоместной функции и создать другую функцию, меньшей арности. Например, имея трёхместную функцию, можно зафиксировать первый аргумент:

```scala
def threeFunc(x: Int, y: Int, z: Int)
def twoFunc(y: Int, z: Int) = threeFunc(0, y, z)
```

Определим функцию partial1:

```scala
def partial1[A, B, C](a: A, f: (A, B) => C): B => C = 
  (b: B) => f(a, b)
```

Получается, в функцию `(b: B) => f(a, b)` нужно будет передать только B, когда A зафиксировано при создании такой функции. 

## Упражнение: каррирование

Каррирование - это приведение функции от нескольких аргументов к нескольким функциям от одного.

```scala
 A => (B => C) это то же самое, что A => B => C
def curry[A, B, C](f: (A, B) => C): A => (B => C) =
  (a: A) => ((b: B) => f(a,b))
```

Пример использования:

```scala
def exampleFunc(a: Int, b: Int): Int = a + b

val newFunc = curry(exampleFunc)

val f1 = newFunc(1) // f1: Int => Int 
val f2 = f1(2) // 3

newFunc(1)(2) // 3
```

## Упражнение: обратное преобразование

```scala
def uncurry[A, B, C](f: A => B => C): (A, B) => C =
  (a, b) => f(a)(b)


uncurry(newFunc)(1,2) // 3
```

## Упражнение: композиция

```scala
def compose[A, B, C](f: B => C, g: A => B): A => C = 
  a => f(g(a)) 
```

Композиция функций - настолько частый приём, что стандартная библиотека включает метод `compose` для `Function1`. Композиция позволяет добиться гибкости написанного кода. Для композирования могут быть использованы функции от одного аргумента. Получить такие функции позволяет приём **каррирование**.


