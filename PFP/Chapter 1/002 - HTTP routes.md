# HTTP-эндпоинты

Апи будет с версиями, чтобы помочь перестраиваться в будущем. Эндпоинты будут начинаться с /v1 префикса. Каждый эндпоинт может упасть с ошибкой 500, это не указывается в документации. 

## Открытые роуты

Эти роуты не требуют аутентификации

### Роуты аутентификации

**POST /users**
- 201 - успешно создан;
- 400 - неверный формат запроса;
- 409 - юзернейм уже есть.

Запрос:

```json
{
  "username": "Dave",
  "password": "123456"
}
```

Ответ:

```json
{
  "access_token": "eX34_dfs..."
}
```

**POST /auth/login**
- 200 - успешный вход;
- 403 - неверный юзернейм или пароль.

Запрос:

```json
{
  "username": "Dave",
  "password": "123456"
}
```

Ответ:

```json
{
  "access_token": "eX34_dfs..."
}
```

**POST /auth/logout**
- 204 - успешный выход

### Роуты брендов и товаров

GET /brands

GET /categories

GET /items

GET /items?brand=gibson

Все возвращают листы соотвествующих классов.

## Защищённые роуты

Эти роуты требуют пользователей быть аутентифицированными. Они могут возвращать данные коды кроме описанных далее:

- 401 - unauthorized;
- 403 - нет прав.

### Роуты тележки продуктов

**GET /cart**

```json
{
  "items": [
    {
      "item": {},
      "quantity": 4
    }
  ],

  "total": 2312
}
```

**POST /cart** 
- 201 - вещь добавлена;
- 409 - вещь уже в тележке.

```json
{
  "items": {
    "uuid":4
  }
}
```

**PUT /cart** - обновить количество
- 200 - обновлено;
- 400 - ошибка в количестве.

```json
{
  "items": {
    "uuid": 1
  }
}
```

**DELETE /cart/{itemId}**
- 204 - товар успешно удален (если присутствовал).

### Роуты оплаты

**POST /checkout**
- 201 - обработано успешно;
- 400 - например, неверный номер карты.

Запрос: данные карты;
Ответ:

```json
"order_id": "ewirj3428..."
```

### Роуты заказов

GET /orders

GET /orders/{orderId}

## Роуты администратора

Требуют специфичного токена (*API Access Token*).

POST /brands

POST /categories

POST /items

PUT /items - обновить цену

